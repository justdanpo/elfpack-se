CoverArt in Standby v3.52
© UltraShot
® IronMaster, Joker XT, 2007KrasH
*************************************
Оглавление
1) Возможности
2) Установка
3) Работа с масками текстов.
4) Редактируем/создаём тексты
5) Баги/глюки? 
6) Благодарности
*************************************
I. Возможности.
Отличия от предыдущей версии:
-показ номера песни в плейлисте, общего количества трэков
-проверка наличия необходимых констант при запуске
-багфиксы
-некоторое улучшение производительности
-разные константы для определения главного экрана для 2010/2020
-фикс для телефонов без флэшки
-мелкие изменения
-бкфг не менялся
*************************************
Общие возможности:
-показ оставшегося времени
-баг с воспроизведением музыки в диспетчере файлов исправлен
-убран адрес текущего трэка. Работает на всех моделях телефонов.
-добавлен "перенос строк" в настройках надписей, переработана структура бкфг
-показ прогрессбара текущего времени + показ текущего времени (надписью), 
-возможность постоянно перерисовывать надпись (необходимо для текущего времени)
-скоростная работа с использованием ивентов
-показ обложки текущей песни +любое другое изображение для красоты.
-отображение ID3 v2.x, m4a, wma и прочих тэгов. 
-также поддержка чтения ID3 v1.0 тэгов для совместимости со старыми телефонами
-показ правильного (!) битрейта/частоты дискретизации/времени песни/режима
-скроллинг длинных надписей в любую сторону.
-bcfg-конфиг
-анимированные надписи (как в SWF-обоях)
-текстовые маски в надписях
-прорисовка по всему ГЭ, а так же на софтах/статусбаре не на ГЭ
-четыре режима скроллинга +два механизма определения длины строки функцией 0x300 из библиотеки
-файлы читаются хоть с карты, хоть с памяти телефона
-некоторая переработка эльфа под старые телефоны
-три режима запуска эльфа - для телефонов, у которых проблемы с запуском из демонов
-оптимизация +повышение производительности путём отключения прорисовок картинок на ненужных местах (ГЭ, софты, статус...)
-поддержка различных кодировок. Для этого надо кинуть encoding.bin в Config/CoverArt/
-и ещё куча возможностей

*************************************
II. Установка.
1) Создать папку CoverArt в папке Config на карте или на телефоне
2) Скинуть туда файлы анимации и кастом имэдж. Впоследствии все файлы кидать туда же.
3) Запустить эльфа
4) Открыть конфиг BCFGEdit'ом (http://perk11.info/elfse/BcfgEdit_main.elf)
5) Отредактировать всё, что хочется
6) Использовать

*************************************
III. Работа с масками текстов
"$код" меняется на соответствующую надпись.

$0 = $t = название
$1 = $a = альбом
$2 = $c = артист
$3 = $g = жанр
$4 = $y = год
$5 = $b = битрейт
$6 = $f = частота дискретизации
$7 = $m = режим
$8 = $l = длина
$9 = $n = номер трэка
$s = текущее время песни
$e - оставшееся время
$i - порядковый номер текущей песни в плейлисте
$p - кол-во трэков в плейлисте

Например, написав туда "$bкб/с | $s/$l/-$e" вы получите на выходе "320кб/с | 02:31/03:58/-01:27"

*************************************
IV. Редактируем скрипты
Существуют несколько служебных команд.
[ACTIONS_COUNT]: 112; //Общее количество действий в скрипте. Обязательно!
[UPDATE_TIME]: 1000; //Время обновления. По умолчанию ставится 1000
[USED_LABELS]: 012; //Использованные в скрипте надписи (изображение и обложки не записываются!) Это влияет на правильную установку надписей!
[HIDE_WHEN_ISNT_IN_STANDBY]: 012; //Надписи, которые надо скрывать, когда находишься не на главном экране. 10 и 11(изображения) добавлять не надо!

и дальше идёт описание действий. Нумерация с нуля!
A): B:C:D:E:F:G:H:I:J:K;
где 
A - номер действия
B - индекс надписи (начиная с нуля!). 10 - обложка, 11 - картинка
C - X-позиция. Отрицательные числа поддерживаются во всех координатах(!)
D - Y-позиция.
E - максимальная X-позиция
F - максимальная Y-позиция
G - Основной цвет. Записывается не хекс-числом, а dec-числом! пример: 0xFF000000 после перевода стандартным калькулем становится 4278190080.
     0 - заставляет не менять цвет...
H - Цвет обводки.
I - Код шрифта. 0 - не меняет
J - Центрирование. 3 - заставляет тел не менять центрирование
K - сколько действий надо повторить сразу после этого действия. 
Например, ввод "4" будет выполнять скрипт блоками по 4 действия

Не забываем, что есть тестовый скрипт, можно там посмотреть информацию=)

************************************
V. Багрепорты
1) Если у вас не показывается ничего на экране после запуска эльфа, проверьте наличие следующих ивентов в DYN_CONST.bin:
UI_MEDIAPLAYER_STOP_PRESSED_EVENT
UI_MEDIAPLAYER_PLAY_PRESSED_EVENT
UI_MEDIAPLAYER_PAUSE_PRESSED_EVENT
UI_MEDIAPLAYER_CREATED_EVENT
UI_MEDIAPLAYER_DESTROYED_EVENT
UI_MEDIAPLAYER_AUDIO_PLAYING_TIME_EVENT
UI_MEDIAPLAYER_VIDEO_PLAYING_TIME_EVENT

Все сообщения о глюках направлять сюда:
http://mobilefree.ru/newbb_plus/viewtopic.php?topic_id=3066&start=0
Баги могут быть исправлены, или предложены варианты устранения. 
Просьба не посылать уже отправленные багрепорты (т.е. хоть немного почитать тему)

************************************
VI. Благодарности
Выражаю огромную благодарность IronMaster'у, Joker'у XT и 2007KrasH'у за помощь. Также спасибо всем авторам эльфпака ;-)
С уважением, UltraShot
